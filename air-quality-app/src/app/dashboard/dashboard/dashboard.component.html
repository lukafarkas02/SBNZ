<app-navigation></app-navigation>

<div class="dashboard-container">

  <h1>Welcome, {{ userFirstName }}</h1>

  <div class="cards-row">

    <div class="card aqi-card">
      <h2>Current air quality</h2>

      <div class="aqi-box" [ngStyle]="{'background-color': getAirQualityColor(airQualityInfo?.airCategory)}"> </div>
      
      <p class="aqi-value">{{ airQualityInfo?.airCategory }}</p>
    </div>

    <div class="card chart-card">
      <h2>Change in PM2.5 and PM10 in the last 24h</h2>
      <!-- <div class="chart-placeholder">[Ovde ide linijski grafikon]</div> -->
       <div style="display: block; height: 300px;">
        <canvas baseChart
                [data]="lineChartData"
                [options]="lineChartOptions"
                [type]="lineChartType">
        </canvas>
      </div>
    </div>

    <div class="card pollutants-card">
      <h2>Current pollutants values</h2>
      <table>
        <tr>
          <th>Pollutant</th>
          <th>Value</th>
        </tr>
        <tr *ngFor="let p of airQualityInfo?.explanation?.influencingPollutants">
          <td>{{ p.split('=')[0].trim() }}</td>
          <td>{{ p.split('=')[1].trim() }}</td>
        </tr>
      </table>
    </div>
  </div>


  <div class="alerts">
    <h2>Warnings</h2>
    <ul>
       <li>{{ airQualityInfo?.recommendation?.content }}</li>
       <li>{{ airQualityInfo?.recommendation?.recommendation }}</li>
    </ul>
  </div>
</div>
